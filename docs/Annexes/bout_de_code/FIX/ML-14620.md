---
sidebar_label: "ML-14620 – Filtre 'Annulé' dans l'historique des CRE"
sidebar_position: 6
tags:
  - Bug
  - Code source
  - Monalisa-Compta
  - CRE
---
# Code source

## `CompteRenduEvenement.java`

### Avant

```java
@Getter
@Setter
public class CompteRenduEvenementCriteria {
    
    private String codeCre;
    private String codeDemande;
    private String codeLoueur;
    private String codeTiers;
    private LocalDate dateCreationDebut;
    private LocalDate dateCreationFin;
    private String numeroPiece;
    private Boolean sens;
    private String sousType;
    private Long indexPage;
    private String orderBy;
    private String desc;
    private Boolean statut;
}
```

### Après

```java
@Getter
@Setter
public class CompteRenduEvenementCriteria {
    
    private String codeCre;
    private String codeDemande;
    private String codeLoueur;
    private String codeTiers;
    private LocalDate dateCreationDebut;
    private LocalDate dateCreationFin;
    private String numeroPiece;
    private Boolean sens;
    private String sousType;
    private Long indexPage;
    private String orderBy;
    private String desc;
    private Statut statut;
}
```

## `CreServiceImpl.java`

```java
if (compteRenduEvenementCriteria.getStatut() != null) {
                // Modifié par la ligne en dessous : Predicate statutPredicate = cb.equal(root.get("statut"), compteRenduEvenementCriteria.getStatut() ? Statut.SUCCES : Statut.ECHEC);
                Predicate statutPredicate = cb.equal(root.get("statut"), compteRenduEvenementCriteria.getStatut());
                predicates.add(statutPredicate);
            }
```

## `filtrer-historique-cre.component.html`

### Avant

```html
 <ml-ui-button-duo [nullable]="true" formControlName="statut" labelLeft="Succès" labelRight="Echec"></ml-ui-button-duo>
```

### Après

```html
   <ml-ui-button-radio formControlName="statut" [nullable]=true>
      <button type="button" mlUiButton [mlUiButtonValue]="'SUCCES'">Succès</button>
      <button type="button" mlUiButton [mlUiButtonValue]="'ECHEC'">Echec</button>
      <button type="button" mlUiButton [mlUiButtonValue]="'ANNULE'">Annulé</button>
    </ml-ui-button-radio>
```

## `HistoriqueCriteria.yaml`

```yaml
  indexPage:
    type: integer
    format: int64
    example: 435
    description: Identifiant unique du cre
  orderBy:
    type: string
  desc:
    type: string
  statut:
  //Avant type: boolean
    type: string
    enum:
      - SUCCES
      - ECHEC
      - ANNULE
    description: true si CRE en succès, false si en echec
```

---

